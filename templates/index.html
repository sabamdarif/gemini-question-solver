<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gemini Image Question Solver</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
    <script src=" https://cdn.jsdelivr.net/npm/marked@17.0.1/lib/marked.umd.min.js "></script>
    <!-- KaTeX for math rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" />
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
  </head>

  <body>
    <div class="container">
      <!-- Header -->
      <div class="card header-card">
        <h1 class="main-title">ü§ñ Gemini Question Solver</h1>
        <p class="subtitle">Upload an image with questions and let Gemini solve them for you</p>
      </div>

      <!-- Upload Section -->
      <div class="card">
        <h2 class="section-title">üì∏ Upload Image</h2>

        <!-- Model Selection -->
        <div class="model-select-container">
          <label for="modelSelect" class="model-label">Choose Model:</label>
          <select id="modelSelect" class="model-select">
            <option value="gemini-2.5-flash" selected>Gemini 2.5 Flash</option>
            <option value="gemini-2.5-pro">Gemini 2.5 Pro</option>
            <option value="gemini-2.5-flash-preview-09-2025">Gemini 2.5 Flash Preview</option>
            <option value="gemini-2.5-flash-lite">Gemini 2.5 Flash-Lite</option>
            <option value="gemini-2.5-flash-lite-preview-09-2025">Gemini 2.5 Flash Lite Preview</option>
            <option value="gemini-2.0-flash">Gemini 2.0 Flash</option>
            <option value="gemini-2.0-flash-lite">Gemini 2.0 Flash Lite</option>
          </select>
        </div>

        <!-- File Input -->
        <div class="upload-container">
          <label for="imageInput" class="upload-area">
            <div class="upload-prompt" id="uploadPrompt">
              <svg class="upload-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
              </svg>
              <p class="upload-text-main"><span class="upload-text-bold">Click to upload</span> or drag and drop</p>
              <p class="upload-text-sub">PNG, JPG, GIF, WEBP, PDF (Max 20MB)</p>
            </div>
            <div id="imagePreviewContainer" class="image-preview-container hidden">
              <img id="imagePreview" class="preview-image" alt="Preview" />
              <div id="pdfPreview" class="pdf-preview hidden">
                <svg class="pdf-icon" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z" />
                </svg>
                <p id="pdfFileName" class="pdf-filename"></p>
              </div>
            </div>
            <input id="imageInput" type="file" class="file-input" accept="image/*,application/pdf" />
          </label>
        </div>

        <!-- Analyze Button -->
        <button id="analyzeBtn" class="analyze-btn" disabled>
          <span id="analyzeText">üîç Analyze & Solve Questions</span>
        </button>
      </div>

      <!-- Results Section -->
      <div id="resultsSection" class="card hidden">
        <h2 class="section-title">‚ú® Solution</h2>

        <!-- Loading State -->
        <div id="loadingState" class="loading-container hidden">
          <div class="spinner"></div>
          <p class="loading-text">Analyzing image and solving questions...</p>
        </div>

        <!-- Results Display -->
        <div id="resultsContent" class="markdown-body"></div>
      </div>

      <!-- Error Display -->
      <div id="errorSection" class="error-card hidden">
        <div class="error-content">
          <svg class="error-icon" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" />
          </svg>
          <div>
            <h3 class="error-title">Error</h3>
            <p id="errorMessage" class="error-message"></p>
          </div>
        </div>
      </div>
    </div>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
  </body>
</html>

